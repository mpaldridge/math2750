<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 21 Queues | MATH2750 Introduction to Markov Processes</title>
  <meta name="description" content="Lecture notes for the course MATH2750 Introduction to Markov Process at the University of Leeds, 2020–2021" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 21 Queues | MATH2750 Introduction to Markov Processes" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://mpaldridge.github.io/math2750/" />
  
  <meta property="og:description" content="Lecture notes for the course MATH2750 Introduction to Markov Process at the University of Leeds, 2020–2021" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 21 Queues | MATH2750 Introduction to Markov Processes" />
  
  <meta name="twitter:description" content="Lecture notes for the course MATH2750 Introduction to Markov Process at the University of Leeds, 2020–2021" />
  

<meta name="author" content="Matthew Aldridge" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="A4.html"/>
<link rel="next" href="S22-end.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MATH2750 Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html"><i class="fa fa-check"></i>About MATH2750</a>
<ul>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#about-module"><i class="fa fa-check"></i>Organisation of MATH2750</a>
<ul>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#notes"><i class="fa fa-check"></i>Notes and videos</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#problem-sheets"><i class="fa fa-check"></i>Problem sheets</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#lectures"><i class="fa fa-check"></i>Lectures</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#workshops"><i class="fa fa-check"></i>Workshops</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#assessments"><i class="fa fa-check"></i>Assessments</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#about-computing"><i class="fa fa-check"></i>Computing worksheets</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#dropin"><i class="fa fa-check"></i>Drop-in sessions</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#team"><i class="fa fa-check"></i>Microsoft Team</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#time"><i class="fa fa-check"></i>Time management</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#exam"><i class="fa fa-check"></i>Exam</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#ask"><i class="fa fa-check"></i>Who should I ask about…?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#about-content"><i class="fa fa-check"></i>Content of MATH2750</a>
<ul>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#prereqs"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#syllabus"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#books"><i class="fa fa-check"></i>Books</a></li>
<li class="chapter" data-level="" data-path="S00-about.html"><a href="S00-about.html#finally"><i class="fa fa-check"></i>And finally…</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Part I: Discrete time Markov chains</b></span></li>
<li class="chapter" data-level="1" data-path="S01-stochastic-processes.html"><a href="S01-stochastic-processes.html"><i class="fa fa-check"></i><b>1</b> Stochastic processes and the Markov property</a>
<ul>
<li class="chapter" data-level="1.1" data-path="S01-stochastic-processes.html"><a href="S01-stochastic-processes.html#models"><i class="fa fa-check"></i><b>1.1</b> Deterministic and random models</a></li>
<li class="chapter" data-level="1.2" data-path="S01-stochastic-processes.html"><a href="S01-stochastic-processes.html#stochastic-processes"><i class="fa fa-check"></i><b>1.2</b> Stochastic processes</a></li>
<li class="chapter" data-level="1.3" data-path="S01-stochastic-processes.html"><a href="S01-stochastic-processes.html#markov-property"><i class="fa fa-check"></i><b>1.3</b> Markov property</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="S02-random-walk.html"><a href="S02-random-walk.html"><i class="fa fa-check"></i><b>2</b> Random walk</a>
<ul>
<li class="chapter" data-level="2.1" data-path="S02-random-walk.html"><a href="S02-random-walk.html#simple-random-walk"><i class="fa fa-check"></i><b>2.1</b> Simple random walk</a></li>
<li class="chapter" data-level="2.2" data-path="S02-random-walk.html"><a href="S02-random-walk.html#general-random-walks"><i class="fa fa-check"></i><b>2.2</b> General random walks</a></li>
<li class="chapter" data-level="2.3" data-path="S02-random-walk.html"><a href="S02-random-walk.html#exact-distribution"><i class="fa fa-check"></i><b>2.3</b> Exact distribution of the simple random walk</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P01.html"><a href="P01.html"><i class="fa fa-check"></i>Problem Sheet 1</a></li>
<li class="chapter" data-level="3" data-path="S03-gamblers-ruin.html"><a href="S03-gamblers-ruin.html"><i class="fa fa-check"></i><b>3</b> Gambler’s ruin</a>
<ul>
<li class="chapter" data-level="3.1" data-path="S03-gamblers-ruin.html"><a href="S03-gamblers-ruin.html#ruin-chain"><i class="fa fa-check"></i><b>3.1</b> Gambler’s ruin Markov chain</a></li>
<li class="chapter" data-level="3.2" data-path="S03-gamblers-ruin.html"><a href="S03-gamblers-ruin.html#ruin-probability"><i class="fa fa-check"></i><b>3.2</b> Probability of ruin</a></li>
<li class="chapter" data-level="3.3" data-path="S03-gamblers-ruin.html"><a href="S03-gamblers-ruin.html#expected-duration"><i class="fa fa-check"></i><b>3.3</b> Expected duration of the game</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="S04-ldes.html"><a href="S04-ldes.html"><i class="fa fa-check"></i><b>4</b> Linear difference equations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="S04-ldes.html"><a href="S04-ldes.html#hom-ldes"><i class="fa fa-check"></i><b>4.1</b> Homogeneous linear difference equations</a></li>
<li class="chapter" data-level="4.2" data-path="S04-ldes.html"><a href="S04-ldes.html#ruin-probability-solve"><i class="fa fa-check"></i><b>4.2</b> Probability of ruin for the gambler’s ruin</a></li>
<li class="chapter" data-level="4.3" data-path="S04-ldes.html"><a href="S04-ldes.html#inhom-ldes"><i class="fa fa-check"></i><b>4.3</b> Inhomogeneous linear difference equations</a></li>
<li class="chapter" data-level="4.4" data-path="S04-ldes.html"><a href="S04-ldes.html#duration-solve"><i class="fa fa-check"></i><b>4.4</b> Expected duration for the gambler’s ruin</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P02.html"><a href="P02.html"><i class="fa fa-check"></i>Problem sheet 2</a></li>
<li class="chapter" data-level="" data-path="A1.html"><a href="A1.html"><i class="fa fa-check"></i>Assessment 1</a></li>
<li class="chapter" data-level="5" data-path="S05-markov-chains.html"><a href="S05-markov-chains.html"><i class="fa fa-check"></i><b>5</b> Discrete time Markov chains</a>
<ul>
<li class="chapter" data-level="5.1" data-path="S05-markov-chains.html"><a href="S05-markov-chains.html#thmc"><i class="fa fa-check"></i><b>5.1</b> Time homogeneous discrete time Markov chains</a></li>
<li class="chapter" data-level="5.2" data-path="S05-markov-chains.html"><a href="S05-markov-chains.html#S05-example"><i class="fa fa-check"></i><b>5.2</b> A two-state example</a></li>
<li class="chapter" data-level="5.3" data-path="S05-markov-chains.html"><a href="S05-markov-chains.html#n-step"><i class="fa fa-check"></i><b>5.3</b> <em>n</em>-step transition probabilities</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="S06-examples.html"><a href="S06-examples.html"><i class="fa fa-check"></i><b>6</b> Examples from actuarial science</a>
<ul>
<li class="chapter" data-level="6.1" data-path="S06-examples.html"><a href="S06-examples.html#S06-example1"><i class="fa fa-check"></i><b>6.1</b> A simple no-claims discount model</a></li>
<li class="chapter" data-level="6.2" data-path="S06-examples.html"><a href="S06-examples.html#S06-example2"><i class="fa fa-check"></i><b>6.2</b> An accident model with memory</a></li>
<li class="chapter" data-level="6.3" data-path="S06-examples.html"><a href="S06-examples.html#S06-example3"><i class="fa fa-check"></i><b>6.3</b> A no-claims discount model with memory</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P03.html"><a href="P03.html"><i class="fa fa-check"></i>Problem sheet 3</a></li>
<li class="chapter" data-level="7" data-path="S07-classes.html"><a href="S07-classes.html"><i class="fa fa-check"></i><b>7</b> Class structure</a>
<ul>
<li class="chapter" data-level="7.1" data-path="S07-classes.html"><a href="S07-classes.html#comm-classes"><i class="fa fa-check"></i><b>7.1</b> Communicating classes</a></li>
<li class="chapter" data-level="7.2" data-path="S07-classes.html"><a href="S07-classes.html#periodicity"><i class="fa fa-check"></i><b>7.2</b> Periodicity</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="S08-hitting-times.html"><a href="S08-hitting-times.html"><i class="fa fa-check"></i><b>8</b> Hitting times</a>
<ul>
<li class="chapter" data-level="8.1" data-path="S08-hitting-times.html"><a href="S08-hitting-times.html#hitting-definitions"><i class="fa fa-check"></i><b>8.1</b> Hitting probabilities and expected hitting times</a></li>
<li class="chapter" data-level="8.2" data-path="S08-hitting-times.html"><a href="S08-hitting-times.html#return-times"><i class="fa fa-check"></i><b>8.2</b> Return times</a></li>
<li class="chapter" data-level="8.3" data-path="S08-hitting-times.html"><a href="S08-hitting-times.html#return-rw"><i class="fa fa-check"></i><b>8.3</b> Hitting and return times for the simple random walk</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P04.html"><a href="P04.html"><i class="fa fa-check"></i>Problem sheet 4</a></li>
<li class="chapter" data-level="9" data-path="S09-recurrence-transience.html"><a href="S09-recurrence-transience.html"><i class="fa fa-check"></i><b>9</b> Recurrence and transience</a>
<ul>
<li class="chapter" data-level="9.1" data-path="S09-recurrence-transience.html"><a href="S09-recurrence-transience.html#rec-trans-def"><i class="fa fa-check"></i><b>9.1</b> Recurrent and transient states</a></li>
<li class="chapter" data-level="9.2" data-path="S09-recurrence-transience.html"><a href="S09-recurrence-transience.html#rec-tran-classes"><i class="fa fa-check"></i><b>9.2</b> Recurrent and transient classes</a></li>
<li class="chapter" data-level="9.3" data-path="S09-recurrence-transience.html"><a href="S09-recurrence-transience.html#S09-positive-null"><i class="fa fa-check"></i><b>9.3</b> Positive and null recurrence</a></li>
<li class="chapter" data-level="9.4" data-path="S09-recurrence-transience.html"><a href="S09-recurrence-transience.html#S09-strong-markov"><i class="fa fa-check"></i><b>9.4</b> Strong Markov property</a></li>
<li class="chapter" data-level="9.5" data-path="S09-recurrence-transience.html"><a href="S09-recurrence-transience.html#S09-lemma"><i class="fa fa-check"></i><b>9.5</b> A useful lemma</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="S10-stationary-distributions.html"><a href="S10-stationary-distributions.html"><i class="fa fa-check"></i><b>10</b> Stationary distributions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="S10-stationary-distributions.html"><a href="S10-stationary-distributions.html#def-stationary-definition"><i class="fa fa-check"></i><b>10.1</b> Definition of stationary distribution</a></li>
<li class="chapter" data-level="10.2" data-path="S10-stationary-distributions.html"><a href="S10-stationary-distributions.html#find-stationary"><i class="fa fa-check"></i><b>10.2</b> Finding a stationary distribution</a></li>
<li class="chapter" data-level="10.3" data-path="S10-stationary-distributions.html"><a href="S10-stationary-distributions.html#exist-unique"><i class="fa fa-check"></i><b>10.3</b> Existence and uniqueness</a></li>
<li class="chapter" data-level="10.4" data-path="S10-stationary-distributions.html"><a href="S10-stationary-distributions.html#stat-proof"><i class="fa fa-check"></i><b>10.4</b> Proof of existence and uniqueness</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P05.html"><a href="P05.html"><i class="fa fa-check"></i>Problem sheet 5</a></li>
<li class="chapter" data-level="11" data-path="S11-long-term-chains.html"><a href="S11-long-term-chains.html"><i class="fa fa-check"></i><b>11</b> Long-term behaviour of Markov chains</a>
<ul>
<li class="chapter" data-level="11.1" data-path="S11-long-term-chains.html"><a href="S11-long-term-chains.html#equilibrium"><i class="fa fa-check"></i><b>11.1</b> Convergence to equilibrium</a></li>
<li class="chapter" data-level="11.2" data-path="S11-long-term-chains.html"><a href="S11-long-term-chains.html#convergence-examples"><i class="fa fa-check"></i><b>11.2</b> Examples of convergence and non-convergence</a></li>
<li class="chapter" data-level="11.3" data-path="S11-long-term-chains.html"><a href="S11-long-term-chains.html#S11-ergodic"><i class="fa fa-check"></i><b>11.3</b> Ergodic theorem</a></li>
<li class="chapter" data-level="11.4" data-path="S11-long-term-chains.html"><a href="S11-long-term-chains.html#S11-proofs"><i class="fa fa-check"></i><b>11.4</b> Proofs of the limit and ergodic theorems</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="S12-revision-i.html"><a href="S12-revision-i.html"><i class="fa fa-check"></i><b>12</b> End of of Part I: Discrete time Markov chains</a>
<ul>
<li class="chapter" data-level="12.1" data-path="S12-revision-i.html"><a href="S12-revision-i.html#todo-revision"><i class="fa fa-check"></i><b>12.1</b> Things to do</a></li>
<li class="chapter" data-level="12.2" data-path="S12-revision-i.html"><a href="S12-revision-i.html#summary-i"><i class="fa fa-check"></i><b>12.2</b> Summary of Part I</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P06.html"><a href="P06.html"><i class="fa fa-check"></i>Problem sheet 6</a></li>
<li class="chapter" data-level="" data-path="A3.html"><a href="A3.html"><i class="fa fa-check"></i>Assessment 3</a></li>
<li class="part"><span><b>Part II: Continuous time Markov jump processes</b></span></li>
<li class="chapter" data-level="13" data-path="S13-poisson-poisson.html"><a href="S13-poisson-poisson.html"><i class="fa fa-check"></i><b>13</b> Poisson process with Poisson increments</a>
<ul>
<li class="chapter" data-level="13.1" data-path="S13-poisson-poisson.html"><a href="S13-poisson-poisson.html#poisson-dist"><i class="fa fa-check"></i><b>13.1</b> Poisson distribution</a></li>
<li class="chapter" data-level="13.2" data-path="S13-poisson-poisson.html"><a href="S13-poisson-poisson.html#poisson-def-poisson"><i class="fa fa-check"></i><b>13.2</b> Definition 1: Poisson increments</a></li>
<li class="chapter" data-level="13.3" data-path="S13-poisson-poisson.html"><a href="S13-poisson-poisson.html#summed-marked"><i class="fa fa-check"></i><b>13.3</b> Summed and marked Poisson processes</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="S14-poisson-exponential.html"><a href="S14-poisson-exponential.html"><i class="fa fa-check"></i><b>14</b> Poisson process with exponential holding times</a>
<ul>
<li class="chapter" data-level="14.1" data-path="S14-poisson-exponential.html"><a href="S14-poisson-exponential.html#exponential"><i class="fa fa-check"></i><b>14.1</b> Exponential distribution</a></li>
<li class="chapter" data-level="14.2" data-path="S14-poisson-exponential.html"><a href="S14-poisson-exponential.html#definition-2-exponential-holding-times"><i class="fa fa-check"></i><b>14.2</b> Definition 2: exponential holding times</a></li>
<li class="chapter" data-level="14.3" data-path="S14-poisson-exponential.html"><a href="S14-poisson-exponential.html#cont-markov"><i class="fa fa-check"></i><b>14.3</b> Markov property in continuous time</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P07.html"><a href="P07.html"><i class="fa fa-check"></i>Problem sheet 7</a></li>
<li class="chapter" data-level="15" data-path="S15-poisson-infinitesimal.html"><a href="S15-poisson-infinitesimal.html"><i class="fa fa-check"></i><b>15</b> Poisson process in infinitesimal time periods</a>
<ul>
<li class="chapter" data-level="15.1" data-path="S15-poisson-infinitesimal.html"><a href="S15-poisson-infinitesimal.html#infinitesimal"><i class="fa fa-check"></i><b>15.1</b> Definition 3: increments in infinitesimal time</a></li>
<li class="chapter" data-level="15.2" data-path="S15-poisson-infinitesimal.html"><a href="S15-poisson-infinitesimal.html#sum2"><i class="fa fa-check"></i><b>15.2</b> Example: sum of two Poisson processes</a></li>
<li class="chapter" data-level="15.3" data-path="S15-poisson-infinitesimal.html"><a href="S15-poisson-infinitesimal.html#forward"><i class="fa fa-check"></i><b>15.3</b> Forward equations and proof of equivalence</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="S16-counting-processes.html"><a href="S16-counting-processes.html"><i class="fa fa-check"></i><b>16</b> Counting processes</a>
<ul>
<li class="chapter" data-level="16.1" data-path="S16-counting-processes.html"><a href="S16-counting-processes.html#birth-processes"><i class="fa fa-check"></i><b>16.1</b> Birth processes</a></li>
<li class="chapter" data-level="16.2" data-path="S16-counting-processes.html"><a href="S16-counting-processes.html#TIPP"><i class="fa fa-check"></i><b>16.2</b> Time inhomogeneous Poisson process</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P08.html"><a href="P08.html"><i class="fa fa-check"></i>Problem Sheet 8</a></li>
<li class="chapter" data-level="17" data-path="S17-continuous-time.html"><a href="S17-continuous-time.html"><i class="fa fa-check"></i><b>17</b> Continuous time Markov jump processes</a>
<ul>
<li class="chapter" data-level="17.1" data-path="S17-continuous-time.html"><a href="S17-continuous-time.html#jump-holding"><i class="fa fa-check"></i><b>17.1</b> Jump chain and holding times</a></li>
<li class="chapter" data-level="17.2" data-path="S17-continuous-time.html"><a href="S17-continuous-time.html#CTMC-examples"><i class="fa fa-check"></i><b>17.2</b> Examples</a></li>
<li class="chapter" data-level="17.3" data-path="S17-continuous-time.html"><a href="S17-continuous-time.html#explosion"><i class="fa fa-check"></i><b>17.3</b> A brief note on explosion</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="S18-forward-backward.html"><a href="S18-forward-backward.html"><i class="fa fa-check"></i><b>18</b> Forward and backward equations</a>
<ul>
<li class="chapter" data-level="18.1" data-path="S18-forward-backward.html"><a href="S18-forward-backward.html#jump-infinitesimal"><i class="fa fa-check"></i><b>18.1</b> Transitions in infinitesimal time periods</a></li>
<li class="chapter" data-level="18.2" data-path="S18-forward-backward.html"><a href="S18-forward-backward.html#semigroup"><i class="fa fa-check"></i><b>18.2</b> Transition semigroup and the forward and backward equations</a></li>
<li class="chapter" data-level="18.3" data-path="S18-forward-backward.html"><a href="S18-forward-backward.html#matrix-exp"><i class="fa fa-check"></i><b>18.3</b> Matrix exponential</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P09.html"><a href="P09.html"><i class="fa fa-check"></i>Problem Sheet 9</a></li>
<li class="chapter" data-level="19" data-path="S19-class-hitting.html"><a href="S19-class-hitting.html"><i class="fa fa-check"></i><b>19</b> Class structure and hitting times</a>
<ul>
<li class="chapter" data-level="19.1" data-path="S19-class-hitting.html"><a href="S19-class-hitting.html#classes-cont"><i class="fa fa-check"></i><b>19.1</b> Communicating classes</a></li>
<li class="chapter" data-level="19.2" data-path="S19-class-hitting.html"><a href="S19-class-hitting.html#periods2"><i class="fa fa-check"></i><b>19.2</b> A brief note on periodicity</a></li>
<li class="chapter" data-level="19.3" data-path="S19-class-hitting.html"><a href="S19-class-hitting.html#hitting2"><i class="fa fa-check"></i><b>19.3</b> Hitting probabilities and expected hitting times</a></li>
<li class="chapter" data-level="19.4" data-path="S19-class-hitting.html"><a href="S19-class-hitting.html#recurrence-transience2"><i class="fa fa-check"></i><b>19.4</b> Recurrence and transience</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="S20-long-term-jump.html"><a href="S20-long-term-jump.html"><i class="fa fa-check"></i><b>20</b> Long-term behaviour of Markov jump processes</a>
<ul>
<li class="chapter" data-level="20.1" data-path="S20-long-term-jump.html"><a href="S20-long-term-jump.html#stationary-jump"><i class="fa fa-check"></i><b>20.1</b> Stationary distributions</a></li>
<li class="chapter" data-level="20.2" data-path="S20-long-term-jump.html"><a href="S20-long-term-jump.html#convergernce-cont"><i class="fa fa-check"></i><b>20.2</b> Convergence to equilibrium</a></li>
<li class="chapter" data-level="20.3" data-path="S20-long-term-jump.html"><a href="S20-long-term-jump.html#ergodic-cont"><i class="fa fa-check"></i><b>20.3</b> Ergodic theorem</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P10.html"><a href="P10.html"><i class="fa fa-check"></i>Problem Sheet 10</a></li>
<li class="chapter" data-level="" data-path="A4.html"><a href="A4.html"><i class="fa fa-check"></i>Assessment 4</a></li>
<li class="chapter" data-level="21" data-path="S21-queues.html"><a href="S21-queues.html"><i class="fa fa-check"></i><b>21</b> Queues</a>
<ul>
<li class="chapter" data-level="21.1" data-path="S21-queues.html"><a href="S21-queues.html#MMinf"><i class="fa fa-check"></i><b>21.1</b> M/M/∞ infinite server process</a></li>
<li class="chapter" data-level="21.2" data-path="S21-queues.html"><a href="S21-queues.html#MM1"><i class="fa fa-check"></i><b>21.2</b> M/M/1 single server queue</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="S22-end.html"><a href="S22-end.html"><i class="fa fa-check"></i><b>22</b> End of Part II: Continuous time Markov jump processes</a>
<ul>
<li class="chapter" data-level="22.1" data-path="S22-end.html"><a href="S22-end.html#summary-ii"><i class="fa fa-check"></i><b>22.1</b> Summary of Part II</a></li>
<li class="chapter" data-level="22.2" data-path="S22-end.html"><a href="S22-end.html#exam-faqs"><i class="fa fa-check"></i><b>22.2</b> Exam FAQs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="P11.html"><a href="P11.html"><i class="fa fa-check"></i>Problem Sheet 11</a></li>
<li class="chapter" data-level="" data-path="computing.html"><a href="computing.html"><i class="fa fa-check"></i>Computational worksheets</a>
<ul>
<li class="chapter" data-level="" data-path="computing.html"><a href="computing.html#C-about"><i class="fa fa-check"></i>About the computational worksheets</a></li>
<li class="chapter" data-level="" data-path="computing.html"><a href="computing.html#R-access"><i class="fa fa-check"></i>How to access R</a></li>
<li class="chapter" data-level="" data-path="computing.html"><a href="computing.html#R-background"><i class="fa fa-check"></i>R background</a></li>
</ul></li>
<li class="divider"></li>
<li></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MATH2750 Introduction to Markov Processes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="S21-queues" class="section level1" number="21">
<h1><span class="header-section-number">Section 21</span> Queues</h1>
<div class="mysummary">
<ul>
<li>The M/M/<span class="math inline">\(\infty\)</span> infinite server process</li>
<li>The M/M/1 single server queue</li>
</ul>
</div>
<div id="MMinf" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> M/M/∞ infinite server process</h2>
<div class="videowrap">
<div class="videowrapper">
<iframe src="https://www.youtube.com/embed/bF83jJotAiw">
</iframe>
</div>
</div>
<p>In a mathematical model for a queue, individuals arrive, receive a service, and leave. In our first example, individuals receive service as soon as they arrive – so there is no actual “queueing”. In our second example, later, individuals will actually queue up and wait until the server is able to serve them.</p>
<p>Our first process as follows. Individuals arrive like a Poisson process of rate <span class="math inline">\(\lambda\)</span>. Then they receive a service which takes time <span class="math inline">\(\operatorname{Exp}(\mu)\)</span>, independent of everything else, and then they leave.</p>
<p>This can be a useful model for many applications: for example, visitors watching a livestream on a website could arrive at the website like a Poisson process of rate <span class="math inline">\(\lambda\)</span> and watch the livestream for a <span class="math inline">\(\operatorname{Exp}(\mu)\)</span> amount of time. Other models could include the number of students in the University library, the number of insurance contracts held by an insurance broker, or the number of files being downloaded from a server.</p>
<p>The number of individuals <span class="math inline">\((X(t))\)</span> in the process (that is, receiving the service) at time <span class="math inline">\(t\)</span> is a Markov jump process with arrival rates <span class="math inline">\(q_{i,i+1} = \lambda\)</span>. The rate of departures when <span class="math inline">\(i\)</span> individuals are being serviced has the rate and <span class="math inline">\(q_{i,i-1} = i\mu\)</span>, because, thanks to the memoryless property of the exponential distribution, the first service time to finish is the minimum of <span class="math inline">\(i\)</span> remaining exponential service times, and this is exponential with rate <span class="math inline">\(i\mu\)</span>. Since rows of a generator matrix sum to 0, we have <span class="math inline">\(q_i = -q_{ii} = \lambda + i\mu\)</span>.</p>
<div class="figure" style="text-align: center"><span id="fig:MMinf-diag"></span>
<img src="math2750_files/figure-html/MMinf-diag-1.png" alt="An M/M/∞ queue" width="480" />
<p class="caption">
Figure 21.1: An M/M/∞ queue
</p>
</div>
<p>Writing <span class="math inline">\(\mathsf Q = (q_{ij})\)</span> as a matrix, it is
<span class="math display">\[ \mathsf Q = \begin{pmatrix}
-\lambda &amp; \lambda          &amp;                   &amp;                   &amp;         &amp;        \\
\mu      &amp; -(\lambda + \mu) &amp; \lambda           &amp;                   &amp;         &amp;        \\
         &amp; 2\mu             &amp; -(\lambda + 2\mu) &amp; \lambda           &amp;         &amp;        \\
         &amp;                  &amp; 3\mu              &amp; -(\lambda + 3\mu) &amp; \lambda &amp;        \\
         &amp;                  &amp;                   &amp; \ddots            &amp; \ddots  &amp; \ddots
\end{pmatrix} , \]</span>
where all the blank entries are 0.</p>
<p>This process is called the <strong>M/M/<span class="math inline">\(\infty\)</span></strong> process.</p>
<ul>
<li>The first M stands for <strong>memoryless arrivals</strong>, which means the arrivals process is a Poisson process, which has exponential – and therefore memoryless – interarrival times.</li>
<li>The second M stands for <strong>memoryless service times</strong>, which means the service times are exponentially distributed, and hence have the memoryless property.</li>
<li>The <span class="math inline">\(\infty\)</span> stands for <strong>infinite servers</strong>, which means there is no limit on how many individuals can be serviced at once.</li>
</ul>
<p>Two questions we might want to know the answer to are these:</p>
<ol style="list-style-type: decimal">
<li>In the long run, what’s the average number of individuals being serviced?</li>
<li>In the long run, for what proportion of the time are all the servers idle?</li>
</ol>
<p>To find out about this long run behaviour, we need to calculate the stationary distribution. The stationary distribution solves <span class="math inline">\(\boldsymbol\pi\mathsf Q = \mathsf 0\)</span>. Thus we have
<span class="math display" id="eq:MMst">\[\begin{equation}
    \lambda \pi_{i-1} - (\lambda + i\mu)\pi_i + (i+1)\mu \pi_{i+1} = 0  \tag{21.1}
\end{equation}\]</span>
for <span class="math inline">\(i \geq 1\)</span>, and
<span class="math display" id="eq:MMsu">\[\begin{equation}
  -\lambda \pi_0 + \mu \pi_1 = 0  \tag{21.2}
\end{equation}\]</span>
from the first column of <span class="math inline">\(\mathsf Q\)</span>.</p>
<p>Rearranging <a href="S21-queues.html#eq:MMsu">(21.2)</a> gives <span class="math inline">\(\pi_1 = \rho \pi_0\)</span>, where <span class="math inline">\(\rho = \lambda/\mu\)</span>. Putting this into <a href="S21-queues.html#eq:MMst">(21.1)</a> for <span class="math inline">\(i = 1\)</span> gives (after some algebra) <span class="math inline">\(\pi_2 = \pi_0 \rho^2 / 2\)</span>. Putting that into for <span class="math inline">\(i = 2\)</span> gives <span class="math inline">\(\pi_3 = \pi_0 \rho^3 / 6\)</span>.vThis looks suspiciously like the stationary distribution might be the Poisson distribution with rate <span class="math inline">\(\rho\)</span>; that is, <span class="math inline">\(\pi_i = \pi_0 \rho^i / i! = \mathrm{e}^{-\rho} \rho^i / i!\)</span>.</p>
<div class="theorem">
<p><span id="thm:MMinf-thm" class="theorem"><strong>Theorem 21.1  </strong></span>Let <span class="math inline">\((X(t))\)</span> be an M/M/<span class="math inline">\(\infty\)</span> process with arrivals at rate <span class="math inline">\(\lambda\)</span> and service at rate <span class="math inline">\(\mu\)</span>. The process has the stationary distribution <span class="math inline">\(\pi_i = \mathrm{e}^{-\rho} \rho^i / i!\)</span>, corresponding to <span class="math inline">\(X(t) \sim \mathrm{Po}(\rho)\)</span>, where <span class="math inline">\(\rho = \lambda/\mu\)</span>.</p>
</div>
<div class="proof">
<p><span id="unlabeled-div-25" class="proof"><em>Proof</em>. </span>We know that this <span class="math inline">\(\boldsymbol\pi\)</span> is a distribution. We must check that <span class="math inline">\(\boldsymbol\pi\)</span> fulfills <span class="math inline">\(\boldsymbol\pi \mathsf Q = \mathbf 0\)</span>. We’ve already checked <a href="S21-queues.html#eq:MMsu">(21.2)</a>. For <span class="math inline">\(i \geq 1\)</span>, we have from <a href="S21-queues.html#eq:MMst">(21.1)</a>,
<span class="math display">\[\begin{align*}
\lambda \pi_{i-1}{} - {}&amp;(\lambda + i\mu)\pi_i + (i+1)\mu \pi_{i+1} \\
  &amp;= \lambda\, \mathrm{e}^{-\rho} \frac{\rho^{i-1}}{(i-1)!} - (\lambda + i\mu) \,\mathrm{e}^{-\rho} \,\frac{\rho^i}{i!} + (i+1)\mu \,\mathrm{e}^{-\rho} \frac{\rho^{i+1}}{(i+1)!} \\
  &amp;= \lambda \mathrm{e}^{-\rho}  \frac{i}{\rho} \frac{\rho^i}{i!} - (\lambda + i\mu) \,\mathrm{e}^{-\rho} \,\frac{\rho^i}{i!} + \mu \mathrm{e}^{-\rho} \rho \,\frac{\rho^i}{i!} \\
  &amp;= \mathrm{e}^{-\rho} i\mu \frac{\rho^i}{i!} - (\lambda + i\mu) \,\mathrm{e}^{-\rho} \,\frac{\rho^i}{i!} + \mathrm{e}^{-\rho} \lambda \,\frac{\rho^i}{i!}\\
  &amp;= \mathrm{e}^{-\rho} \,\frac{\rho^i}{i!} \big( i \mu   - (\lambda + i \mu) +   \lambda \big)  \\
  &amp;= 0 ,
\end{align*}\]</span>
as desired.</p>
</div>
<p>This process is clearly irreducible, and since it has a stationary distribution it must be positive recurrent. So, by the limit theorem, we see that <span class="math inline">\(\boldsymbol\pi\)</span> is also the equilibrium distribution. By the ergodic theorem, the long-run amount of time spent in each state is governed by <span class="math inline">\(\boldsymbol\pi\)</span>.</p>
<p>In answer to question 1, the average number of individuals being serviced is <span class="math inline">\(\mathbb E (\text{Po}(\rho)) = \rho = \lambda/\mu\)</span>. In answer to question 2, the long-run proportion of time the process is empty is <span class="math inline">\(\pi_0 = \mathrm{e}^{-\rho} = \mathrm{e}^{-\lambda/\mu}\)</span>.</p>
</div>
<div id="MM1" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> M/M/1 single server queue</h2>
<div class="videowrap">
<div class="videowrapper">
<iframe src="https://www.youtube.com/embed/7DroMz8yrKk">
</iframe>
</div>
</div>
<p>We now consider a slightly different process with only one server. This is called an <strong>M/M/1</strong> queue, where the “1” is the number of servers.</p>
<p>As before, individuals arrive as a Poisson process of rate <span class="math inline">\(\lambda\)</span>. If there is no one currently being serviced, the individual goes straight to the server, and begins an <span class="math inline">\(\operatorname{Exp}(\mu)\)</span> service time. Otherwise, they have to join a queue waiting for the server to become free. When the server finishes serving one individual, then, provided the queue is nonempty, they immediately begin to service the individual who has been waiting in the queue for the longest time.</p>
<p>This is again a very useful model for many applications. For example, it could model a lecturer’s office hours: students arrive at my office at rate <span class="math inline">\(\lambda\)</span>; if I’m free, I can immediately answer their question, which will take an <span class="math inline">\(\text{Exp}(\mu)\)</span> amount of time; but if I’m already dealing with a student, they must join a queue and wait until I am free. This could also model purchases at a shop with a single till, phone calls to a receptionist, or the work of a self-employed person on different tasks.</p>
<p>Let <span class="math inline">\((X(t))\)</span> be the number of individuals in the process at time <span class="math inline">\(t\)</span>. That could be <span class="math inline">\(X(t) = 0\)</span>, if the server is free; <span class="math inline">\(X(t) = 1\)</span> if one individual is currently being serviced but no one else is waiting; or <span class="math inline">\(X(t) = x &gt; 1\)</span> if one individual is being services and <span class="math inline">\(x - 1\)</span> individuals are waiting in the queue.. Individuals enter the queue at rate <span class="math inline">\(q_{i,i+1} = \lambda\)</span>. When <span class="math inline">\(i \geq 1\)</span>, meaning someone is being serviced, we have departures at rate <span class="math inline">\(q_{i,i-1} = \mu\)</span>. Thus <span class="math inline">\(q_i = -q_{ii} = \lambda + \mu\)</span> for <span class="math inline">\(i \geq 1\)</span>, and <span class="math inline">\(q_0 = -q_{00} = \lambda\)</span>.</p>
<div class="figure" style="text-align: center"><span id="fig:MMine-diag"></span>
<img src="math2750_files/figure-html/MMine-diag-1.png" alt="An M/M/1 queue" width="480" />
<p class="caption">
Figure 21.2: An M/M/1 queue
</p>
</div>
<p>The matrix <span class="math inline">\(\mathsf Q\)</span> this time is
<span class="math display">\[ \mathsf Q = \begin{pmatrix}
-\lambda &amp; \lambda          &amp;                  &amp;                  &amp;         &amp;        \\
\mu      &amp; -(\lambda + \mu) &amp; \lambda          &amp;                  &amp;         &amp;        \\
         &amp; \mu              &amp; -(\lambda + \mu) &amp; \lambda          &amp;         &amp;        \\
         &amp;                  &amp; \mu              &amp; -(\lambda + \mu) &amp; \lambda &amp;        \\
         &amp;                  &amp;                  &amp; \ddots           &amp; \ddots  &amp; \ddots
\end{pmatrix} . \]</span></p>
<p>The first thing we would like to know is if the queue keeps getting longer and longer, or whether eventually every individual is serviced.</p>
<p>For this continuous time jump process <span class="math inline">\((X(t))\)</span>, the discrete time jump chain <span class="math inline">\((Y_n)\)</span> is a simple random walk with up probability <span class="math inline">\(p = \lambda/(\lambda + \mu)\)</span>, down probability <span class="math inline">\(q = \mu/(\lambda + \mu)\)</span>, and a reflecting barrier at 0. Recall that this Markov chain is transient for <span class="math inline">\(p &gt; q\)</span>, null recurrent for <span class="math inline">\(p = q\)</span>, and positive recurrent for <span class="math inline">\(p &lt; q\)</span>. Thus we see that:</p>
<ul>
<li>For <span class="math inline">\(\lambda &gt; \mu\)</span>, the queue is transient, and eventually the length of the queue will grow longer and longer and never clear. This is clearly highly undesirable.</li>
<li>For <span class="math inline">\(\lambda = \mu\)</span>, the queue is null recurrent, so while the queue will eventually clear, the expected time for it to do so is infinite, so the queue will get very long, and individuals will may have to wait for an extremely long time. This is also undesirable.</li>
<li>For <span class="math inline">\(\lambda &lt; \mu\)</span>, the queue is positive recurrent, so while individuals may sometimes have to wait, the queue will clear fairly regularly. This is what we want.</li>
</ul>
<p>In what follows, we consider only the “good” case <span class="math inline">\(\lambda &lt; \mu\)</span>. Again we have two questions:</p>
<ol style="list-style-type: decimal">
<li>In the long run, what’s the average number of individuals being serviced?</li>
<li>In the long run, for what proportion of the time is the server idle and for what proportion of time is the server busy?</li>
</ol>
<p>Again, we look for a stationary distribution, which will tell us about the long term behaviour of the queue. The equation <span class="math inline">\(\boldsymbol\pi\mathsf Q = \mathbf 0\)</span> this time becomes
<span class="math display">\[ \mu \pi_{i+1} - (\lambda + \mu) \pi_i + \lambda \pi_{i-1} = 0 \qquad \text{for $i \geq 1$} , \]</span>
together with the initial condition <span class="math inline">\(\mu \pi_1 - \lambda \pi_0 = 0\)</span> from the first column of <span class="math inline">\(\mathsf Q\)</span>, and the normalising condition <span class="math inline">\(\sum_i \pi_i = 1\)</span>.</p>
<p>We recognise this as a linear difference equation. The characteristic equation (using <span class="math inline">\(\alpha\)</span> where we used <span class="math inline">\(\lambda\)</span> previously, since <span class="math inline">\(\lambda\)</span> is already in use) is
<span class="math display">\[ \mu \alpha^2 - (\lambda + \mu)\alpha + \lambda = (\alpha - 1)(\mu \alpha - \lambda ) = 0 . \]</span>
This has solutions <span class="math inline">\(\alpha = 1\)</span> and <span class="math inline">\(\alpha = \rho\)</span>, where <span class="math inline">\(\rho = \lambda/\mu &lt; 1\)</span>, so the general solution to the equation is <span class="math inline">\(\pi_i = A + B\rho^i\)</span>.</p>
<p>The initial condition gives
<span class="math display">\[  \mu \pi_1 - \lambda \pi_0 = \mu(A + B\rho) - \lambda(A + B) = A\mu + B\lambda - A \lambda - B\lambda = A(\mu - \lambda) = 0 . \]</span>
Since <span class="math inline">\(\lambda &lt; \mu\)</span>, we must have <span class="math inline">\(A = 0\)</span>. The normalising condition requires
<span class="math display">\[ \sum_{i=0}^\infty \pi_i = \sum_{i=0}^\infty B\rho^i = \frac{B}{1- \rho} = 1 , \]</span>
where we’ve used the formula for the sum of a geometric progression with <span class="math inline">\(\rho &lt; 1\)</span>, which gives <span class="math inline">\(B = 1 - \rho.\)</span></p>
<p>Thus we have the stationary distribution <span class="math inline">\(\pi_i = (1 - \rho)\rho^i\)</span>,
which is a geometric distribution (the version that starts from <span class="math inline">\(i = 0\)</span>).</p>
<div class="theorem">
<p><span id="thm:MMone-thm" class="theorem"><strong>Theorem 21.2  </strong></span>Let <span class="math inline">\((X(t))\)</span> be an M/M/1 queue with arrivals at rate <span class="math inline">\(\lambda\)</span> and service at rate <span class="math inline">\(\mu &gt; \lambda\)</span>. The queue has the stationary distribution <span class="math inline">\(\pi_i = (1 - \rho)\rho^i\)</span>, corresponding to <span class="math inline">\(X(t) \sim \mathrm{Geom}(\rho)\)</span>, where <span class="math inline">\(\rho = \lambda/\mu &lt; 1\)</span>.</p>
</div>
<p>By the limit theorem, this is an equilibrium distribution, and the ergoic theorem also applied.</p>
<p>To answer question 1, the long-run average number of individuals in the process will be
<span class="math display">\[ \mathbb E\big(\text{Geom}(\rho)\big) = \frac{\rho}{1-\rho} = \frac{\lambda}{\mu - \lambda} . \]</span>
If <span class="math inline">\(\lambda\)</span> is only slightly smaller than <span class="math inline">\(\mu\)</span> then this number can be quite large; in this case the queue can get very long, even though we know it will clear in a reasonable finite-expectation time.
To answer question 2, the server will be free a proportion <span class="math inline">\(\pi_0 = 1 - \rho = 1 - \lambda/\mu\)</span> of the time and busy a proportion <span class="math inline">\(1 - \pi_0 = \lambda/\mu\)</span> of the time, in the long run. Again, if <span class="math inline">\(\lambda\)</span> is only slightly smaller than <span class="math inline">\(\mu\)</span>, then the server will be busy most of the time.</p>
<div class="mysummary">
<p>This brings us to the end of the mathematical material in this module. <strong>In the next section</strong>, we summarise Part II on continuous time Markov jump processes and discuss the forthcoming exam.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="A4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="S22-end.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["math2750.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
